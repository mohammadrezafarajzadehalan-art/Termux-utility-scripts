#!/bin/bash
# meaning_factory.sh

echo "๐ญ ุฑุงูโุงูุฏุงุฒ ฺฉุงุฑุฎุงูู ุชููุฏ ูุนูุง"

# ููุงุด ููู ุชููุฏ
show_production_menu() {
    cat << EOF

    ๐ฏ ุฎุทูุท ุชููุฏ ูุนูุง:
    
    ฑ) ูุนูุงูุง ฺฉูฺฺฉ ุฑูุฒูุฑู
       โข ูุนูุง ฺฉ ูุจุฎูุฏ ูุงฺฏูุงู
       โข ูุนูุง ฺฉ ููุฌุงู ฺุง ฺฏุฑู
       โข ูุนูุง ุจุงุฑุงู ุจูุงุฑ
    
    ฒ) ูุนูุงูุง ุฑุงุจุทูโุง
       โข ูุนูุง ุฏูุณุช ูุฏู
       โข ูุนูุง ูฺฏุงู ูุงุฏุฑุจุฒุฑฺฏ
       โข ูุนูุง ุฏุณุชโูุง ูพุฏุฑ
    
    ณ) ูุนูุงูุง ูุฌูุฏ
       โข ูุนูุง ุจูุฏู ุฏุฑ ุงู ุฌูุงู
       โข ูุนูุง ุฌุณุชุฌู ุญููุช
       โข ูุนูุง ฺฏุฐุฑ ุฒูุงู
    
    ด) ูุนูุงูุง ฺฉูุงู
       โข ูุนูุง ููุฑ ุณุชุงุฑูโูุง
       โข ูุนูุง ุจโฺฉุฑุงู ูุถุง
       โข ูุนูุง ุฒูุฏฺฏ ุฏุฑ ุฒูู
    
    ต) ูุนูุงูุง ุณูุงุฑุด
       โข ุชููุฏ ูุนูุง ุจุฑุง ูููุนุช ุฎุงุต

EOF
}

# ุชููุฏ ูุนูุง
produce_meaning() {
    local meaning_type=$1
    local context=$2
    
    echo ""
    echo "๐ญ ุฏุฑ ุญุงู ุชููุฏ ูุนูุง..."
    sleep 2
    
    case $meaning_type in
        "ูุจุฎูุฏ")
            MEANING="ฺฉ ูุจุฎูุฏ ุฏุฑฺูโุง ุงุณุช ุจู ุฏูุง ุฏฺฏุฑ ฺฉู ุฏุฑูู ูุงุณุช."
            PROCESS="ุชุจุฏู ุงูุฑฺ ุดุงุฏ ุจู ฺฉููุงุช"
            ;;
        "ฺุง")
            MEANING="ฺุง ฺฏุฑู ุงุฏุขูุฑ ุงู ุงุณุช ฺฉู ฺฏุงู ุชูููโูุง ูุงุฒูโุชุฑู ุญุฑฺฉุชโูุง ูุณุชูุฏ."
            PROCESS="ุงุณุชุฎุฑุงุฌ ุญฺฉูุช ุงุฒ ุจุฎุงุฑ"
            ;;
        "ุจุงุฑุงู")
            MEANING="ุจุงุฑุงู ุฒูู ุฑุง ููโุดูุฏุ ุงุฏุขูุฑ ูโฺฉูุฏ ฺฉู ูพุงฺฉ ุฏุฑูู ุชูุณุช."
            PROCESS="ุชุตูู ููุงูู ุฏุฑ ุงุจุฑูุง ุชูฺฉุฑ"
            ;;
        "ุฏูุณุช")
            MEANING="ุฏูุณุช ุขููโุง ุงุณุช ฺฉู ุฎูุฏุช ุฑุง ุฏุฑ ุขู ูโุจูุ ุงูุง ุฒุจุงุชุฑ."
            PROCESS="ุตูู ุฏุงุฏู ุฑูุงุจุท ุฏุฑ ฺฉูุฑู ุฒูุงู"
            ;;
        "ุณุชุงุฑู")
            MEANING="ุณุชุงุฑูโูุง ูุดุงู ูโุฏููุฏ ฺฉู ุชุงุฑฺฉ ูู ูโุชูุงูุฏ ุฒุจุง ุจุงุดุฏ ุงฺฏุฑ ููุฑ ุฏุฑ ุขู ุจุงุดุฏ."
            PROCESS="ูุดุฑุฏูโุณุงุฒ ููุฑ ฺฉูฺฉุดุงู ุจู ุญฺฉูุช"
            ;;
        *)
            MEANING="ูุนูุง ูุซู ฺฏู ุงุณุช: ุจุงุฏ ุฏุฑ ุฒูุงู ููุงุณุจ ู ูฺฉุงู ููุงุณุจ ุดฺฉููุง ุดูุฏ."
            PROCESS="ฺฉุงุดุช ุจุฐุฑ ุชูฺฉุฑ ุฏุฑ ุฎุงฺฉ ุชุฌุฑุจู"
            ;;
    esac
    
    # ุชููุฏ ฺฉุงุฑุช ูุนูุง
    MEANING_ID="MEAN-$(date +%s | tail -c 6)"
    
    cat > "${MEANING_ID}.meaning" << EOF
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           ฺฉุงุฑุช ูุนูุง                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ ฺฉุฏ: $MEANING_ID
โ ุชุงุฑุฎ ุชููุฏ: $(date)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ ููุถูุน: $meaning_type
โ ุฒููู: $context
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ          ูุชู ูุนูุง:                  โ
โ   $MEANING
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ      ูุฑุขูุฏ ุชููุฏ:                  โ
โ   $PROCESS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ        ุฏุณุชูุฑ ุงุณุชูุงุฏู:               โ
โ ฑ. ุงู ูุชู ุฑุง ุจุฎูุงู                 โ
โ ฒ. ฺุดูุงูุช ุฑุง ุจุจูุฏ                   โ
โ ณ. ุขู ุฑุง ุฏุฑ ููุจุช ุฌุง ุจุฏู            โ
โ ด. ุจฺฏุฐุงุฑ ุฏุฑ ุฒูุฏฺฏโุงุช ุฌุงุฑ ุดูุฏ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ุชุงุฑุฎ ุงููุถุง: ูุฑฺฏุฒ
ุดุฑุงุท ูฺฏูุฏุงุฑ: ุฏุฑ ููุจุ ุฏูุฑ ุงุฒ ูุฑุงููุด

ฺฉุงุฑุฎุงูู ูุนูุงูุง ุงุตู
"ูุง ูุนูุง ููโุณุงุฒูุ ฺฉุดูุด ูโฺฉูู"
EOF
    
    echo "โ ูุนูุง ุชููุฏ ุดุฏ!"
    echo "๐ ฺฉุฏ: $MEANING_ID"
    echo "๐ ูุชู: $MEANING"
    echo "๐ ูุงู: ${MEANING_ID}.meaning"
    
    # ุงุซุฑุงุช ูุนูุง
    echo ""
    echo "โจ ุงุซุฑุงุช ุงู ูุนูุง:"
    EFFECTS=(
        "ุดูุงูุช ุฐูู ุจู ูุฏุช ณ ุณุงุนุช"
        "ุณุจฺฉ ููุจ ุจู ูุฏุช ฑ ุฑูุฒ"
        "ุงูุฒุงุด ุฏุฑฺฉ ุฒุจุงโูุง"
        "ฺฉุงูุด ุงููุช ูุดฺฉูุงุช ฺฉูฺฺฉ"
    )
    
    for effect in "${EFFECTS[@]}"; do
        echo "   ๐ซ $effect"
        sleep 0.3
    done
}

# ุชููุฏ ูุนูุง ุณูุงุฑุด
custom_meaning() {
    echo ""
    echo "๐จ ุชููุฏ ูุนูุง ุณูุงุฑุด"
    echo "===================="
    
    read -p "ุจุฑุง ฺู ฺุฒ ูโุฎูุงู ูุนูุง ุชููุฏ ฺฉูุ " subject
    read -p "ุฒููู ุง ูููุนุช: " context
    read -p "ฺู ุญุณ ุฏุฑุจุงุฑู ุขู ุฏุงุฑุ " feeling
    
    echo ""
    echo "๐ง ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช..."
    sleep 3
    
    # ุชููุฏ ูุนูุง ุจุฑ ุงุณุงุณ ูุฑูุฏ
    if [[ $feeling == *"ุฎูุจ"* ]] || [[ $feeling == *"ูุซุจุช"* ]]; then
        MEANING="$subject ูุดุงููโุง ุงุณุช ุงุฒ ุฒุจุง ฺฉู ุฏุฑ ุฌุฑุงู ุฒูุฏฺฏ ูพููุงู ุงุณุช."
    elif [[ $feeling == *"ุณุฎุช"* ]] || [[ $feeling == *"ููู"* ]]; then
        MEANING="$subject ูุนูู ุงุณุช ฺฉู ุฏุฑุณโูุง ุงุฑุฒุดููุฏ ุฑุง ุฏุฑ ูพุดุช ููุงุจ ุฏุดูุงุฑ ูพููุงู ฺฉุฑุฏู."
    elif [[ $feeling == *"ุนุฌุจ"* ]] || [[ $feeling == *"ูุจูู"* ]]; then
        MEANING="$subject ุฏุฑ ุงุณุช ุจู ุฌูุงู ูุงุดูุงุฎุชู ุฏุฑูู ุชู."
    else
        MEANING="$subject ุจุฎุด ุงุฒ ููุดูโุง ุจุฒุฑฺฏโุชุฑ ุงุณุช ฺฉู ูููุฒ ฺฉุงูู ููโุจู."
    fi
    
    echo ""
    echo "๐ฎ ูุนูุง ฺฉุดู ุดุฏ:"
    echo "   '$MEANING'"
    
    # ุฐุฎุฑู
    MEANING_ID="CUSTOM-$(date +%H%M%S)"
    echo "$MEANING" > "${MEANING_ID}.txt"
    echo "๐ ุฏุฑ ูุงู ${MEANING_ID}.txt ุฐุฎุฑู ุดุฏ."
}

# ุขุฒูุงุดฺฏุงู ฺฉูุช ูุนูุง
quality_test() {
    echo ""
    echo "๐ฌ ุขุฒูุงุดฺฏุงู ฺฉูุชุฑู ฺฉูุช ูุนูุง"
    echo "=============================="
    
    echo "ุขุฒูุงุดโูุง ุฏุฑ ุญุงู ุงูุฌุงู:"
    
    tests=(
        "ุขุฒูุงุด ุนูู: ุงูุฌุงู ุดุฏ... โ (ุนูู)"
        "ุขุฒูุงูุณุงุฒ ุฌูุงู: ุงูุฌุงู ุดุฏ... โ (ุชุฃุฏ)"
        "ุชุณุช ูุงูุฏฺฏุงุฑ: ุงูุฌุงู ุดุฏ... โ (ุฌุงูุฏุงู)"
        "ุจุฑุฑุณ ุงุตุงูุช: ุงูุฌุงู ุดุฏ... โ (ุฎุงูุต)"
        "ุงูุฏุงุฒูโฺฏุฑ ุชุฃุซุฑ: ุงูุฌุงู ุดุฏ... โ (ูู)"
    )
    
    for test in "${tests[@]}"; do
        echo "   ๐งช $test"
        sleep 0.5
    done
    
    echo ""
    echo "๐ ุขูุงุฑ ฺฉุงุฑุฎุงูู:"
    echo "   ูุนูุงูุง ุชููุฏ ุดุฏู ุงูุฑูุฒ: ฑฒณด"
    echo "   ุฑุถุงุช ูุดุชุฑุงู: นนูช"
    echo "   ุชุฃุซุฑ ูุซุจุช ุจุฑ ุฒูุฏฺฏ: นตูช"
    echo "   ูุนูุงูุง ุจุฑฺฏุดุช: ฐ"
}

# ฺฉุงุฑฺฏุงู ุชุนูุฑ ูุนูุงูุง ุดฺฉุณุชู
repair_broken_meanings() {
    echo ""
    echo "๐ง ฺฉุงุฑฺฏุงู ุชุนูุฑ ูุนูุงูุง ุดฺฉุณุชู"
    echo "============================="
    
    echo "ูุนูุงูุง ุดฺฉุณุชู ุฑุงุฌ:"
    BROKEN_MEANINGS=(
        "'ูฺ ฺุฒ ูุนูุง ูุฏุงุฑุฏ'"
        "'ููู ฺุฒ ุจููุฏู ุงุณุช'"
        "'ูู ุชููุง ูุณุชู'"
        "'ูฺ ฺฉุณ ูุฑุง ุฏุฑฺฉ ููโฺฉูุฏ'"
    )
    
    for i in "${!BROKEN_MEANINGS[@]}"; do
        echo "$((i+1)). ${BROKEN_MEANINGS[$i]}"
    done
    
    read -p "ฺฉุฏุงู ฺฉ ุฑุง ูโุฎูุงู ุชุนูุฑ ฺฉููุ (ุนุฏุฏ): " choice
    
    if [[ "$choice" =~ ^[1-4]$ ]]; then
        REPAIRS=(
            "'ููู ฺุฒ ูุนูุง ุฏุงุฑุฏุ ุญุช ุงู ุฌููู'"
            "'ูุฑ ุชูุงุด ุงุซุฑ ุฏุงุฑุฏุ ฺฏุงู ุฏุฑ ุฌุง ฺฉู ููโุจู'"
            "'ููู ูุง ุชููุง ูุณุชูุ ุงูุง ูโุชูุงูู ุชููุง ุจูุฏู ุฑุง ุจุง ูู ุชูุณู ฺฉูู'"
            "'ุฏุฑฺฉ ฺฉุงูู ุบุฑููฺฉู ุงุณุชุ ุงูุง ุชูุงุด ุจุฑุง ุฏุฑฺฉุ ุฎูุฏุด ููุน ุฏุฑฺฉ ุงุณุช'"
        )
        
        echo ""
        echo "๐จ ุฏุฑ ุญุงู ุชุนูุฑ..."
        sleep 2
        
        echo "โ ุชุนูุฑ ุดุฏ!"
        echo "๐ ุงุฒ: ${BROKEN_MEANINGS[$((choice-1))]}"
        echo "๐ง ุจู: ${REPAIRS[$((choice-1))]}"
        
        echo ""
        echo "๐ก ูฺฉุชู: ูุนูุงูุง ูุซู ุดุดู ูุณุชูุฏ ฺฉู ุจุดฺฉููุฏ."
        echo "   ูุซู ุขุจ ูุณุชูุฏ: ฺฏุงู ุฎ ูโุฒููุฏุ"
        echo "   ุงูุง ููุดู ูโุชูุงููุฏ ุฏูุจุงุฑู ุฌุฑุงู ุงุจูุฏ."
    else
        echo "โ ุงูุชุฎุงุจ ูุงูุนุชุจุฑ"
    fi
}

# ุงุฌุฑุง ฺฉุงุฑุฎุงูู
while true; do
    echo ""
    echo="๐ญ ฺฉุงุฑุฎุงูู ุชููุฏ ูุนูุง"
    echo "ฑ) ูุดุงูุฏู ุฎุทูุท ุชููุฏ"
    echo "ฒ) ุชููุฏ ูุนูุง ุงุณุชุงูุฏุงุฑุฏ"
    echo "ณ) ุชููุฏ ูุนูุง ุณูุงุฑุด"
    echo "ด) ุขุฒูุงุดฺฏุงู ฺฉูุช"
    echo "ต) ุชุนูุฑ ูุนูุงูุง ุดฺฉุณุชู"
    echo "ถ) ุฎุฑูุฌ"
    
    read -p "ุงูุชุฎุงุจ ฺฉู: " choice
    
    case $choice in
        1) show_production_menu ;;
        2)
            echo ""
            read -p "ููุน ูุนูุง (ูุจุฎูุฏุ ฺุงุ ุจุงุฑุงูุ ุฏูุณุชุ ุณุชุงุฑู): " meaning_type
            read -p "ุฒููู: " context
            produce_meaning "$meaning_type" "$context"
            ;;
        3) custom_meaning ;;
        4) quality_test ;;
        5) repair_broken_meanings ;;
        6)
            echo ""
            echo "๐ญ ฺฉุงุฑุฎุงูู ููุดู ุฏุฑ ุญุงู ุชููุฏ ุงุณุช..."
            echo "ุจู ุงุฏ ุฏุงุดุชู ุจุงุด:"
            echo "ุฒูุฏฺฏ ูพุฑ ุงุฒ ูุนูุงุณุชุ"
            echo "ููุท ฺฏุงู ุจุงุฏ ุขู ุฑุง ฺฉุดู ฺฉู."
            echo "ู ฺฏุงู ุจุงุฏ ุขู ุฑุง ุจุณุงุฒ."
            echo ""
            echo "ุฒูุฏฺฏโุง ูพุฑ ูุนูุง ุจุฑุงุชุ ุณุงูู ุฌุงู! ๐ซ"
            break
            ;;
        *) echo "ุงู ุงูุชุฎุงุจ ูุนูุง ูุฏุงุฑุฏ! ๐" ;;
    esac
done